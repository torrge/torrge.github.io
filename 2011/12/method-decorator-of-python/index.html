
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Method Decorator of Python - 到处都是正确答案</title>
  <meta name="author" content="Torrge">

  
  <meta name="description" content="After half of day, I have gotten the main idea of Method Decorator of Python. First,  Decorator with no additional arguments except the method to be &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.torrge.info/2011/12/method-decorator-of-python/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="到处都是正确答案" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=Arvo:400,400italic,700,700italic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=Merienda:700" rel="stylesheet" type="text/css">

  

</head>

<body>
  <div id="navigation">
    <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.torrge.info" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  </div>
  <header role="banner"><hgroup>
  <h1><a href="/">到处都是正确答案</a></h1>
  
    <h2>Here comes the one name written in water.</h2>
  
</hgroup>

</header>
  <div id="body"  >
    <div id="main">
      <div id="content">
        <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Method Decorator of Python</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-03T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>After half of day, I have gotten the main idea of Method Decorator of Python.</p>

<p>First,  Decorator with no additional arguments except the method to be transformed</p>

<pre class="brush:py">@staticmethod
def methodName(args...):
    #do sth</pre>


<p>is equivalent to</p>

<pre class="brush:py">def methodName(args...):
    #do sth
methodName = staticmethod(methodName)</pre>


<p>Then, Decorator with arguments except the method to be transformed</p>

<pre class="brush:py">def decorator(**attrs):
    def wrapper(method):
        for k in attrs:
            setattr(method,k,attrs[k])
        return method
    return wrapper

@decorator(version='x.x.x', author='whatever')
def methodName(args...):
    #do sth</pre>


<p>is equivalent to</p>

<pre class="brush:py">def methodName(args...):
    #do sth
methodName = decorator(version='x.x.x', author='whatever')(methodName)</pre>


<p>Finally, let&#8217;s write piece of code  kind of complex. This decorator adds some attributes to method transformed, and verifies if the argument of the method to be transformed is an int type instance</p>

<pre class="brush:py">def decorator(**kwds):
    def wrapper(method):
        def verify(arg):
            assert isinstance(arg,int)
            return method(arg)
        for k in kwds:
            setattr(verify, k, kwds[k]):
        return verify
    return wraper

@decorator(version='x.x.x', author='whatever')
def methodName(arg):
    #do sth</pre>


<p>is equivalent to</p>

<pre class="brush:py">def methodName(arg):
    #do sth
methodName = decorator(version='x.x.x',author='whatever')(arg)</pre>


<p>As expected, there is also Class Decorator for Python, similar with Method Decorator.</p>

<p>ref: <a href="http://www.python.org/dev/peps/pep-0318/" target="_blank">PEP 0318</a></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">torrge</span></span>

      








  


<time datetime="2011-12-03T00:00:00+08:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/programming/'>Programming</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2011/10/adjust-and-then-go-ahead/" title="Previous Post: Adjust and then go ahead">&laquo; Adjust and then go ahead</a>
      
      
        <a class="basic-alignment right" href="/2011/12/extending-python-with-c-1/" title="Next Post: Extending Python with C (1)">Extending Python with C (1) &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/05/%e5%ae%81%e5%a4%8f%e5%b7%9d/">宁夏川</a>
      </li>
    
      <li class="post">
        <a href="/2013/03/i-am-back/">I Am Back</a>
      </li>
    
      <li class="post">
        <a href="/2012/08/something-about-learning-javascript/">Something About Learning JavaScript</a>
      </li>
    
      <li class="post">
        <a href="/2012/07/setup-python-web/">Setup Python Web</a>
      </li>
    
      <li class="post">
        <a href="/2012/07/%e7%9c%bc%e6%9c%9b%e7%9d%80%e5%8c%97%e6%96%b9/">眼望着北方</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/torrge">@torrge</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'torrge',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/torrge?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/torrge">My Delicious Bookmarks &raquo;</a></p>
</section>




  
</aside>


      </div>
    </div>
    <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Torrge -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>. Design by <a href="http://octopressthemes.com">Octopress Themes</a></span>
</p>

</footer>
    

<script type="text/javascript">
      var disqus_shortname = 'torrge';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











  </div>
</body>
</html>
